\documentclass[12pt,a4paper,oneside]{book}
\usepackage[utf8x]{inputenc}
\usepackage[russian]{babel}
\usepackage[T2A]{fontenc}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{makeidx}
\usepackage{lmodern}
\usepackage{xcolor}
\usepackage[dvips]{graphicx} %хотим вставлять в диплом рисунки?
\graphicspath{{images/}}
\makeatletter
\renewcommand{\@biblabel}[1]{#1.} % Заменяем библиографию с квадратных скобок на точку:
\makeatother
\usepackage{indentfirst}
\newtheorem{Def}{Определение}[section]
\newtheorem{Thr}{Теорема}[section]
\newtheorem{Cons}{Следствие}[section]
\pagestyle{myheadings}
\renewcommand{\rmdefault}{cmr}
\renewcommand{\sfdefault}{ftx}
\renewcommand{\ttdefault}{cmtt}
\renewcommand{\theenumi}{\arabic{enumi}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\labelenumi}{\arabic{enumi}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\theenumii}{.\arabic{enumii}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\labelenumii}{\arabic{enumi}.\arabic{enumii}.}% Меняем везде перечисления на цифра.цифра
\renewcommand{\theenumiii}{.\arabic{enumiii}}% Меняем везде перечисления на цифра.цифра
\renewcommand{\labelenumiii}{\arabic{enumi}.\arabic{enumii}.\arabic{enumiii}.}% Меняем везде перечисления на цифра.цифра
\usepackage{fancyhdr}
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\protect\markboth{\textbf{#1}}{}}
\renewcommand{\sectionmark}[1]{\protect\markright{\emph{#1}}}
\renewcommand{\subsectionmark}[1]{\protect\markright{\emph{#1}}}
\fancyhf{}

\fancyhead[RE]{\leftmark}
\fancyhead[RO,LE]{\thepage}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0pt}
\addtolength{\headheight}{0.5pt}

\fancypagestyle{plain}{%
    \fancyhead{}                      % ----на обычных страницах без колонтитулов     
\renewcommand{\headrulewidth}{0pt}
}
\fancyhead[LO]{\rightmark}


\usepackage{listings}
\renewcommand{\lstlistingname}{Листинг}
\lstset{ 
extendedchars=false,
   %         stringstyle=\usefont{T2A}{fcr}{b}{n},
   language=C++, %Язык по умолчанию Code langugage
   belowcaptionskip=5pt,
   basicstyle=\usefont{T2A}{fcr}{m}{n},                   % Code font, Examples: \footnotesize, \ttfamily
   % keywordstyle=\color{OliveGreen},        % Keywords font ('*' = uppercase)
   commentstyle=\color{gray},              % Comments font
   keywordstyle=\usefont{T2A}{fcr}{b}{n},        % Keywords font ('*' = uppercase)
   % commentstyle=\usefont{T2A}{fcr}{m}{sl},              % Comments font
   numbers=left,                           % Line nums position
   numberstyle=\tiny,                      % Line-numbers fonts
   stepnumber=1,                           % Step between two line-numbers
   numbersep=5pt,                          % How far are line-numbers from code
   % backgroundcolor=\color{lightlightgray}, % Choose background color
   frame=single,                             % A frame around the code
   tabsize=2,                              % Default tab size
   captionpos=b,                           % Caption-position = bottom
   breaklines=true,                        % Automatic line breaking?
   breakatwhitespace=true,                % Automatic breaks only at whitespace?
   showspaces=false,                       % Dont make spaces visible
   showtabs=false,                         % Dont make tabls visible
   columns=flexible,                       % Column format
   morekeywords={__global__, __device__},  % CUDA specific keywords
   keepspaces = true   %!!!! пробелы в комментариях
}

\lstset{inputencoding=utf8x, extendedchars=false, keepspaces = true,
   language=c}



\author{Гурген Г. Аракелов}
\title{Введение в теорию кодирования}

\begin{document}
\input{body}
 
\end{document} 